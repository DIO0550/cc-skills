# Claude Skills 自作ガイド

## Skillsとは？

Skillsは、Claudeに特定の専門知識、ワークフロー、ツール統合を提供するモジュラーなパッケージです。一般的なAIエージェントを、特定のドメインやタスクに特化したエージェントに変換する「オンボーディングガイド」のような役割を果たします。

### Skillsが提供するもの

1. **専門的なワークフロー** - 特定ドメインのための複数ステップの手順
2. **ツール統合** - 特定のファイル形式やAPIを扱うための指示
3. **ドメイン専門知識** - 企業固有の知識、スキーマ、ビジネスロジック
4. **リソースのバンドル** - 複雑で反復的なタスクのためのスクリプト、リファレンス、アセット

---

## 基本構造

すべてのスキルは以下の構造を持ちます：

```
skill-name/
├── SKILL.md (必須)
│   ├── YAMLフロントマター (必須)
│   │   ├── name: (必須)
│   │   └── description: (必須)
│   └── Markdown指示 (必須)
└── バンドルリソース (オプション)
    ├── scripts/          - 実行可能なコード (Python/Bash等)
    ├── references/       - 必要に応じてコンテキストに読み込まれるドキュメント
    └── assets/           - 出力に使用されるファイル (テンプレート、アイコン、フォント等)
```

---

## SKILL.md の書き方

### 1. フロントマター（YAML）

```yaml
---
name: skill-name
description: スキルが何をするか、いつ使うかの具体的な説明。キーワードやトリガーとなる状況を含める。
---
```

**descriptionの書き方のポイント：**
- スキルが何をするかを具体的に記述
- いつ使うべきかのトリガーやコンテキストを含める
- Claudeが100以上のスキルから選択するため、包括的かつ簡潔に

### 2. 本文（Markdown）

スキルの指示とガイダンスを記述します。

**記述時の原則：**
- **簡潔さが鍵**: Claudeはすでに十分賢いという前提で、Claudeが知らない情報のみを追加
- **命令形/不定詞形を使用**: 「〜してください」「〜する」
- **具体的な例を使用**: 冗長な説明よりも簡潔な例を優先

---

## バンドルリソース（オプション）

### scripts/ - 実行可能なスクリプト

**使用場面：**
- 同じコードが繰り返し書き直される場合
- 決定論的な信頼性が必要な場合

**例：** `scripts/rotate_pdf.py` - PDF回転タスク用

**利点：**
- トークン効率的
- 決定論的
- コンテキストに読み込まずに実行可能

### references/ - リファレンス資料

**使用場面：**
- Claudeが作業中に参照すべきドキュメント

**例：**
- `references/finance.md` - 財務スキーマ
- `references/api_docs.md` - API仕様
- `references/policies.md` - 企業ポリシー

**利点：**
- SKILL.mdを簡潔に保つ
- Claudeが必要と判断した時のみ読み込まれる

**ベストプラクティス：**
- 大きなファイル（>10k語）の場合、SKILL.mdにgrep検索パターンを含める
- 情報は SKILL.md か references のどちらか一方に配置（重複を避ける）

### assets/ - アセットファイル

**使用場面：**
- 出力に使用されるファイルが必要な場合

**例：**
- `assets/logo.png` - ブランドアセット
- `assets/slides.pptx` - PowerPointテンプレート
- `assets/frontend-template/` - HTML/Reactボイラープレート

**利点：**
- 出力リソースをドキュメントから分離
- コンテキストに読み込まずにファイルを使用可能

---

## スキル作成プロセス

### ステップ1: 具体例でスキルを理解

スキルがどのように使用されるかを明確に理解します。

**問いかけの例：**
- 「このスキルはどんな機能をサポートすべきか？」
- 「どのような使い方の例があるか？」
- 「ユーザーがどう言ったらこのスキルがトリガーされるべきか？」

### ステップ2: 再利用可能なコンテンツの計画

各例を分析して、繰り返し実行時に役立つリソースを特定：
- scripts（スクリプト）
- references（リファレンス）
- assets（アセット）

### ステップ3: スキルの初期化

新規スキルを作成する場合、`init_skill.py`スクリプトを実行：

```bash
/mnt/skills/examples/skill-creator/scripts/init_skill.py <skill-name> --path <output-directory>
```

これにより以下が自動生成されます：
- 適切なフロントマターとTODOプレースホルダーを持つSKILL.md
- 例となるリソースディレクトリ：`scripts/`、`references/`、`assets/`

### ステップ4: スキルの編集

1. **リソースの実装から開始**
   - `scripts/`、`references/`、`assets/`ファイルを作成
   - スクリプトは実際に実行してテスト
   - 不要な例ファイルは削除

2. **SKILL.mdの更新**
   - フロントマターを記述（name、description）
   - 使用方法の指示を記述
   - リソースへの参照を含める

### ステップ5: パッケージング

開発完了後、配布可能なzipファイルにパッケージ化：

```bash
/mnt/skills/examples/skill-creator/scripts/package_skill.py <path/to/skill-folder>
```

パッケージングスクリプトは自動的に検証も行います：
- YAMLフロントマターの形式と必須フィールド
- スキル命名規則とディレクトリ構造
- descriptionの完全性と品質
- ファイル構成とリソース参照

### ステップ6: 反復改善

実際のタスクでスキルを使用し、改善点を見つけて更新します。

---

## 設計パターン

### ワークフローパターン

**順次ワークフロー:**
```markdown
PDFフォームの記入には以下のステップがあります：

1. フォームを分析（analyze_form.pyを実行）
2. フィールドマッピングを作成（fields.jsonを編集）
3. マッピングを検証（validate_fields.pyを実行）
4. フォームを記入（fill_form.pyを実行）
5. 出力を検証（verify_output.pyを実行）
```

**条件付きワークフロー:**
```markdown
1. 変更タイプを判定：
   **新規コンテンツ作成？** → 以下の「作成ワークフロー」に従う
   **既存コンテンツ編集？** → 以下の「編集ワークフロー」に従う

2. 作成ワークフロー: [ステップ]
3. 編集ワークフロー: [ステップ]
```

### 出力パターン

**テンプレートパターン（厳密な要件）:**
```markdown
## レポート構造

必ずこのテンプレート構造を使用：

# [分析タイトル]

## エグゼクティブサマリー
[重要な発見の1段落概要]

## 主要な発見
- データに裏付けられた発見1
- データに裏付けられた発見2
```

**例示パターン:**
```markdown
## コミットメッセージフォーマット

以下の例に従ってコミットメッセージを生成：

**例1:**
入力: JWTトークンでユーザー認証を追加
出力:
```
feat(auth): JWT認証の実装

ログインエンドポイントとトークン検証ミドルウェアを追加
```

このスタイルに従う: type(scope): 簡潔な説明、その後に詳細な説明
```

---

## プログレッシブディスクロージャー原則

スキルは3段階のロードシステムを使用：

1. **メタデータ（name + description）** - 常にコンテキスト内（約100語）
2. **SKILL.md本文** - スキルがトリガーされた時（<5k語）
3. **バンドルリソース** - Claudeが必要に応じて（無制限）

**重要：** SKILL.md本文は500行以内を目指し、簡潔に保ちます。

---

## 重要な原則

### 1. 簡潔さが鍵
コンテキストウィンドウは共有リソースです。Claudeがすでに知っていることは書かず、本当に必要な情報のみを含めます。

### 2. 適切な自由度を設定

- **高い自由度（テキストベースの指示）**: 複数のアプローチが有効な場合
- **中程度の自由度（パラメータ付き擬似コード/スクリプト）**: 推奨パターンがある場合
- **低い自由度（特定のスクリプト、少ないパラメータ）**: 操作が繊細でエラーが起きやすい場合

### 3. 含めるべきでないもの

以下のような補助的なドキュメントは作成しない：
- README.md
- INSTALLATION_GUIDE.md
- QUICK_REFERENCE.md
- CHANGELOG.md

スキルはAIエージェントがタスクを実行するために必要な情報のみを含むべきです。

---

## シンプルなスキル例

### 例: brand-guidelines

```yaml
---
name: brand-guidelines
description: Anthropicの公式ブランドカラーとタイポグラフィをアーティファクトに適用。ブランドカラー、スタイルガイドライン、ビジュアルフォーマット、企業デザイン基準が適用される場合に使用。
---
```

このスキルは：
- SKILL.mdファイルのみ（追加リソースなし）
- ブランドカラーとタイポグラフィの仕様を含む
- シンプルで明確な構造

---

## スキル作成のチェックリスト

- [ ] SKILL.mdにYAMLフロントマター（name、description）がある
- [ ] descriptionが具体的でトリガー条件を含む
- [ ] 本文が簡潔で必要な情報のみを含む
- [ ] 必要に応じて scripts/、references/、assets/ を配置
- [ ] リソースへの参照がSKILL.mdに記載されている
- [ ] スクリプトが実際にテストされている
- [ ] 不要な補助ドキュメントを含まない
- [ ] package_skill.pyで検証とパッケージング済み

---

## 参考リソース

- `/mnt/skills/examples/skill-creator/SKILL.md` - スキル作成の完全ガイド
- `/mnt/skills/examples/skill-creator/references/workflows.md` - ワークフローパターン
- `/mnt/skills/examples/skill-creator/references/output-patterns.md` - 出力パターン
- `/mnt/skills/examples/` - 様々なスキルの実例

---

## まとめ

Claudeのスキルは、専門的な知識とワークフローをモジュール化して提供する強力な仕組みです。

**成功のカギ：**
1. 簡潔に書く（Claudeはすでに賢い）
2. 具体例を使う
3. 適切な自由度を設定
4. プログレッシブディスクロージャーを活用
5. 実際の使用で反復改善

これらの原則に従うことで、効果的で再利用可能なスキルを作成できます。
